version: v1
azureMetadata:
  tenantId: e0372f7f-a362-47fb-9631-74a5c4ba8bbf
  subscriptionId: 63c590b6-4947-4898-92a3-cae91a31b5e4
  resourceGroupName: promitor-testing-infrastructure-us
metricDefaults:
  aggregation:
    interval: 00:05:00
  limit: 10
  labels:
    geo: china
    environment: dev
  scraping:
    # Every minute
    schedule: "0 * * ? * *"
metrics:
  - name: promitor_demo_postgresql_simple
    description: "Availability (%) of promitor.io measured in Azure Application Insights"
    resourceType: PostgreSql
    azureMetricConfiguration:
      metricName: cpu_percent
      aggregation:
        type: Average
    resources:
      # Application Insights with data in the service itself (classic, deprecated)
    - serverName: fezfze3
  - name: promitor_demo_postgresql_flex
    description: "Availability (%) of promitor.io measured in Azure Application Insights"
    resourceType: PostgreSql
    azureMetricConfiguration:
      metricName: cpu_percent
      aggregation:
        type: Average
    resources:
      # Application Insights with data in the service itself (classic, deprecated)
    - serverName: fezfze2
      type: Flexible
  - name: promitor_demo_postgresql_hyperscale
    description: "Availability (%) of promitor.io measured in Azure Application Insights"
    resourceType: PostgreSql
    azureMetricConfiguration:
      metricName: cpu_percent
      aggregation:
        type: Average
    resources:
      # Application Insights with data in the service itself (classic, deprecated)
    - serverName: fezfze
      type: Hyperscale
  - name: promitor_demo_postgresql_discovered
    description: "Availability (%) of promitor.io measured in Azure Application Insights"
    resourceType: PostgreSql
    azureMetricConfiguration:
      metricName: cpu_percent
      aggregation:
        type: Average
    resourceDiscoveryGroups:
      - name: postgres-databases
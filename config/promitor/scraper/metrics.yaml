version: v1
azureMetadata:
  tenantId: c8819874-9e56-4e3f-b1a8-1c0325138f27
  subscriptionId: 0f9d7fea-99e8-4768-8672-06a28514f77e
  resourceGroupName: promitor
metricDefaults:
  aggregation:
    interval: 00:05:00
  limit: 10
  labels:
    geo: china
    environment: dev
  scraping:
    # Every minute
    schedule: "0 * * ? * *"
metrics:
- name: promitor_demo_data_factory_pipeline_run_successful_declared
  description: "Amount of successful pipeline runs in Azure Data Factory"
  resourceType: DataFactory
  azureMetricConfiguration:
    metricName: PipelineSucceededRuns
    aggregation:
      type: Total
  resources:
  - resourceGroupName: promitor-sources
    factoryName: promitor-data-factory
    pipelineName: metric-generator
- name: promitor_demo_data_factory_pipeline_run_successful_discovered
  description: "Amount of successful runs for 'metric generator' pipline in Azure Data Factory"
  resourceType: DataFactory
  azureMetricConfiguration:
    metricName: PipelineSucceededRuns
    aggregation:
      type: Total
  resourceDiscoveryGroups:
  - name: data-factory-landscape
- name: promitor_demo_data_share_received_declared
  description: "Amount of shares received from other parties per Azure Data Share account"
  resourceType: DataShare
  azureMetricConfiguration:
    metricName: ShareSubscriptionCount
    aggregation:
      type: Maximum
  resources:
  - resourceGroupName: promitor-sources
    accountName: promitor-data-share
- name: promitor_demo_data_share_received_discovered
  description: "Amount of shares received from other parties per Azure Data Share account"
  resourceType: DataShare
  azureMetricConfiguration:
    metricName: ShareSubscriptionCount
    aggregation:
      type: Maximum
  resourceDiscoveryGroups:
  - name: data-share-landscape
- name: promitor_demo_data_share_sent_discovered
  description: "Amount of shares sent from other parties per Azure Data Share account"
  resourceType: DataShare
  azureMetricConfiguration:
    metricName: ShareCount
    aggregation:
      type: Maximum
  resourceDiscoveryGroups:
  - name: data-share-landscape
name: $(Date:yyyyMMdd)$(Rev:.r)
resources:
- repo: self
trigger: none
pr: none
variables:
  LogicApp.Name: 'promitor-automation-github-ci-scraper'
  GitHub.Repo.Owner: 'tomkerkhove'
  GitHub.Repo.Name: 'promitor'
  GitHub.Bot.Name: 'promitor-bot'
pool:
  vmImage: vs2017-win2016
steps:
- task: qetza.replacetokens.replacetokens-task.replacetokens@3
  displayName: 'Replace tokens in tooling'
  inputs:
    rootDirectory: 'deploy/automation/scraper/ci/'
    targetFiles: azuredeploy.parameters.json
    verbosity: detailed
    actionOnMissing: fail

- task: AzureResourceGroupDeployment@2
  displayName: 'Deploy CI bot for Docker Hub updates'
  inputs:
    azureSubscription: 'Visual Studio Enterprise (0f9d7fea-99e8-4768-8672-06a28514f77e)'
    resourceGroupName: promitor
    location: 'West Europe'
    csmFile: 'deploy/automation/scraper/ci/azuredeploy.json'
    csmParametersFile: 'deploy/automation/scraper/ci/azuredeploy.parameters.json'





